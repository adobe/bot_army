<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.20.2">
    <meta name="project" content="bot_army v0.1.0">
    <title>BotArmy.Bot â€” bot_army v0.1.0</title>
    <link rel="stylesheet" href="dist/html-d9f58a6320b5bfa6dd77.css" />
    <script src="dist/sidebar_items-f777f3ae0f.js"></script>
      <script src="docs_config.js"></script>
    <script async src="dist/html-d9f58a6320b5bfa6dd77.js"></script>
    
  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>
    <div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button">
      <span class="icon-cross" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" id="search-list" class="search-input" placeholder="Search..." aria-label="Search" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName">
bot_army      </a>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

      <li><a id="modules-list" href="#full-list">Modules</a></li>

      <li><a id="exceptions-list" href="#full-list">Exceptions</a></li>

      <li><a id="tasks-list" href="#full-list">Mix Tasks</a></li>
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


      <h1>
        <small class="app-vsn">bot_army v0.1.0</small>
BotArmy.Bot <small>behaviour</small>              </h1>


        <section id="moduledoc">
<p>A &quot;live&quot; bot that can perform actions described by a behavior tree
(<a href="https://hexdocs.pm/behavior_tree/0.3.1/BehaviorTree.Node.html"><code class="inline">BehaviorTree.Node</code></a>).</p>
<p>Bots are just GenServers that continuously tick through the provided behavior tree
until they die or get an outcome of <code class="inline">:done</code>.</p>
<p>Each bot has a &quot;bag of state&quot; called the &quot;context&quot; (sometimes called a &quot;blackboard&quot;
in behaviour tree terminology), which is used to pass values between actions.</p>
<p>Bots ingest actions (the leaf nodes of the tree) in the form of MFA tuples.  The
function will be called with the current context and any provided arguments. The
function must return an outcome, and may also return key-value pairs to
store/update in the context.</p>
<p>See the <a href="readme.html#behavior-what">README</a> for an example.</p>
<p>Accepted outcomes are: <code class="inline">:succeed</code>, <code class="inline">:fail</code>, <code class="inline">:continue</code>, <code class="inline">:done</code> or <code class="inline">{:error, reason}</code>.
<code class="inline">:succeed</code>, <code class="inline">:fail</code> and <code class="inline">:continue</code> can also be in the form of <code class="inline">{:succeed, key: &quot;value&quot;}</code> if you want save/update the context.</p>
<p><code class="inline">:succeed</code> and <code class="inline">:fail</code> will advance the tree via <a href="https://hexdocs.pm/behavior_tree/0.3.1/BehaviorTree.html"><code class="inline">BehaviorTree</code></a>, while <code class="inline">:continue</code>
will leave the tree as it is for the next tick (this can be useful for example for
attempting an action multiple times with a sleep and a &quot;max tries&quot; counter in the
context). <code class="inline">:done</code> stops the bot process successfully, and <code class="inline">{:error, reason}</code> kills
the bot process with the provided reason.</p>
<p>Note the following keys are reserved, and should not be overwritten: <code class="inline">id</code>, <code class="inline">bt</code>,
<code class="inline">start_time</code></p>
<h2 id="module-extending-the-bot" class="section-heading">
  <a href="#module-extending-the-bot" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Extending the Bot
</h2>

<p>You can use Bot exactly as it is.  However, if you need to add additional
functionality to your bots, you can do so.</p>
<p><a href="#content"><code class="inline">BotArmy.Bot</code></a> is actually a behaviour that you can use (<code class="inline">use BotArmy.Bot</code>) in a
custom callback module.  It has a couple of callbacks for config, logging, and
lifecycle hooks (TODO).  Since Bot itself uses a GenServer, you can also add
GenServer callbacks, such as <code class="inline">init</code>, or <code class="inline">handle_[call|cast|info]</code>
(<code class="inline">format_status/2</code> is particularly useful).</p>
<p>For example, you may have a syncing system over websockets that updates the state
in the bot&#39;s context.  By extending Bot with some additional handlers, you can add
this functionality.</p>
<p>The aforementioned &quot;context&quot; is just the GenServer&#39;s state, so your Actions will
have access to everything there.  You can set up initial state in <code class="inline">init/1</code>, and
modify it in your handlers as necessary.  If you implement <code class="inline">init/1</code>, the argument
will be the starting state, so you can merge your state into that, but must return
it.  Again, please be mindful not to overwrite the following keys in the state:
<code class="inline">id</code>, <code class="inline">bt</code>, <code class="inline">start_time</code>.</p>
<p>IMPORTANT - if you do extend Bot, you must set the <code class="inline">bot</code> param when starting a run
(see the docs in the mix tasks).</p>
        </section>

        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#run/2">run(pid, tree)</a>
  </div>
    <div class="summary-synopsis"><p>Instruct the bot to run the supplied behavior tree.</p></div>
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#start_link/2">start_link(bot_callback_module, opts \\ [])</a>
  </div>
    <div class="summary-synopsis"><p>Start up a new bot using the supplied bot implementation.</p></div>
</div>
  </div>
  <div class="summary-callbacks summary">
    <h2>
      <a href="#callbacks">Callbacks</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#c:log_action_outcome/3">log_action_outcome(action_mfa, duration, outcome)</a>
  </div>
    <div class="summary-synopsis"><p>Implement this callback if you want a custom way to log action outcomes.
Defaults to a call to <code class="inline">Logger.info</code> with nice meta data.</p></div>
</div>
  </div>
        </section>

        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions          </h1>
          <div class="functions-list">
<section class="detail" id="run/2">
    <div class="detail-header">
    <a href="#run/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">run(pid, tree)</span>
          </div>
  <section class="docstring">
<p>Instruct the bot to run the supplied behavior tree.</p>
<p>Note, the bot will repeatedly loop through the tree unless you include an action
that returns <code class="inline">:done</code>, at which point it will die.</p>
<p>Returns an error tuple if called on a bot that is already running.</p>
  </section>
</section>
<section class="detail" id="start_link/2">
  
    <span id="start_link/1"></span>
  <div class="detail-header">
    <a href="#start_link/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">start_link(bot_callback_module, opts \\ [])</span>
          </div>
  <section class="docstring">
<p>Start up a new bot using the supplied bot implementation.</p>
<p>Takes a keyword list of options that will be passed to the GenServer.  The
following keys are also used:</p>
<ul>
<li><code class="inline">:id</code> - [required] an identifier for this specific bot, used for logging
purposes.
</li>
</ul>
  </section>
</section>
          </div>
        </section>
        <section id="callbacks" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#callbacks">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Callbacks          </h1>
          <div class="callbacks-list">
<section class="detail" id="c:log_action_outcome/3">
    <div class="detail-header">
    <a href="#c:log_action_outcome/3" class="detail-link" title="Link to this callback">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature">log_action_outcome(action_mfa, duration, outcome)</span>
        
      <div class="specs">
          <pre>log_action_outcome(
  action_mfa :: {<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">module</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()]},
  duration :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>(),
  outcome :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()
) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()</pre>
      </div>
  </div>
  <section class="docstring">
<p>Implement this callback if you want a custom way to log action outcomes.
Defaults to a call to <code class="inline">Logger.info</code> with nice meta data.</p>
  </section>
</section>
          </div>
        </section>
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.20.2),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>
  
  </body>
</html>

